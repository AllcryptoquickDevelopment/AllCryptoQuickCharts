<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Log Prop If Used</title>
</head>
<body>

</body>
<script>
    let glb_state = {
        dark: false,
        name: "Ankasas",
        greeting: "hello, "
    }

    let log_usage = {

        error: (param = "", stack = "") => {
            let text = stack.split("\n")[1].replace("@", "() - ")
            throw `The required ${param} parameter wasn't filled at: \nfunction ${text}.`
        },

        log: (stack = "") => {
            let texts = stack.split("\n")[1].split("@")
            return texts
        },

        get: (original, prop, proxy) => {
            const c = (color = "#999") => `color: ${color};`
            const texts = log_usage.log((new Error().stack))
            console.log(`${texts[0]}%c() get glb_state.%c${prop}%c: %c${original[prop]}`, 
            c(), c("dodgerblue"), c(), c("#000"))
            return prop
        }
    }

    // warning, proxy resolves as a type any. must fix before use.
    let proxy = new Proxy(target = glb_state, log_usage)

    const prx_name = proxy.name
    console.log(prx_name)
</script>
</html>